function isBool(a){return typeof a==="boolean"}function isFunction(a){return typeof a==="function"}function isString(a){return typeof a==="string"}function isObject(a){return typeof a==="object"}function isUndef(a){return typeof a==="undefined"}function collectChildNodes(a){nodes.push(a);for(var b=0;b<a.childNodes.length;b++){nodes.push(collectChildNodes(a.childNodes[b]))}return nodes}function trim(a){if(isUndef(a))a="";if(!isString(a))a=new String(a);var b=a.replace(/\s\s/g," ");return b.replace(/^\s|\s$/,"")}if(typeof sizzler==="undefined"){function _s(a){if(typeof a==="object")return a;return document.querySelector(a)}function _sa(a){if(typeof a==="object")return[].push(a);return document.querySelectorAll(a)}}String.prototype.findFirstNonTagChar=function(){var a=0;if(this.charAt(a)=="<")while(this.indexOf(">",a)!=-1){var a=this.indexOf(">",a);if(this.charAt(a+1)!="<")return a+1}return 0};String.prototype.toFirstCharUppercase=function(){var a=this.findFirstNonTagChar();var b="";if(a>0)b=this.slice(0,a);return b+this.toString().charAt(a).toUpperCase()+this.slice(a+1)};String.prototype.toAllFirstCharsUppercase=function(){var a=this.split(" ");var b="";for(var c=0;c<a.length;c++){if(c>0)b+=" ";b+=(new String(a[c])).toFirstCharUppercase()}return b};String.prototype.toFormattedText=function(a){var b=this.split(".");var c="";var d=false;for(var e=0;e<b.length;e++){if(e>0){if((new String(b[e])).match(/(\s\w){1,}/)){c+=". "}else{d=true;c+="."}}if(trim(b[e]).indexOf(" ")>0&&!d&&(isUndef(a)||isBool(a)&&a)){c+=trim(b[e]).toFirstCharUppercase()}else c+=trim(b[e]);if((new String(b[e])).indexOf(" ")>-1)d=false}return c};String.prototype.parseAsHTML=function(){var a=document.createElement("div");a.innerHTML="<div>"+this.toString()+"</div>";return a};var nodes=[];String.prototype.toLimitedFormattedHTML=function(a,b,c){var d=this.toString().toFormattedText(c).parseAsHTML();var e="";var f="";var g=[];var h=false;var i="";for(var j=0;j<d.childNodes.length;j++){k=[];var k=collectChildNodes(d.childNodes[j]);for(var l=0;l<k.length;l++){if(l==0)continue;if(k[l].tagName!=null){e+="<"+k[l].tagName;if(k[l].attributes)for(var m=0;m<k[l].attributes.length;m++){e+=" "+k[l].attributes[m].nodeName+"='"+k[l].attributes[m].nodeValue+"' "}e+=">";g.push(k[l].tagName)}else if(k[l].nodeValue&&!k[l].hasChildNodes()){if(k[l].nodeValue.length+f.length>=a&&!h){var n=a-f.length;var o=(new String(k[l].nodeValue)).toLimitedFormattedText(n,"",false);e+=o;f+=o;h=true;i=new String(g.pop())}else if(f.length+k[l].nodeValue.length<a){f+=k[l].nodeValue;e+=k[l].nodeValue;i=new String(g.pop())}else{h=true}if(h){if(isUndef(b))var b=" ...";e+=b}}if(i!=""&&i!="undefined"&&l>1)e+="</"+i+">";i="";if(h)break}}while(t=g.pop())e+="</"+t+">";return e};String.prototype.toLimitedFormattedText=function(a,b,c){var d="";if(this.indexOf(" ")<a){var e=this.split(" ");for(var f=0;f<e.length&&d.length+e[f].length<a;f++){if(f>0)d+=" ";d+=e[f]}}else{d=this.slice(0,a)}if(isUndef(b))var b=" ...";var g=a<this.length?b:"";return d.toFormattedText(c)+g};String.prototype.isEmpty=function(){return this.toString()==""};Object.prototype.addListener=function(a,b){this.addEventListener(a,b,false)}