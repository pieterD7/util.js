function isBool(a){return typeof a==="boolean"}function isFunction(a){return typeof a==="function"}function isString(a){return typeof a==="string"}function isObject(a){return typeof a==="object"}function isUndef(a){return typeof a==="undefined"}function collectChildNodes(a){nodes.push(a);for(var b=0;b<a.childNodes.length;b++){nodes.push(collectChildNodes(a.childNodes[b]))}return nodes}function trim(a){if(isUndef(a))a="";if(!isString(a))a=new String(a);var b=a.replace(/\s\s/g," ");return b.replace(/^\s|\s$/,"")}if(typeof sizzler==="undefined"){function _s(a){if(typeof a==="object")return a;return document.querySelector(a)}function _sa(a){if(typeof a==="object")return[].push(a);return document.querySelectorAll(a)}}String.prototype.findFirstNonTagChar=function(){var a=0;if(this.charAt(a)=="<")while(this.indexOf(">",a)!=-1){var a=this.indexOf(">",a);if(this.charAt(a+1)!="<")return a+1}return 0};String.prototype.toFirstCharUppercase=function(){var a=this.findFirstNonTagChar();var b="";if(a>0)b=this.slice(0,a);return b+this.toString().charAt(a).toUpperCase()+this.slice(a+1)};String.prototype.toAllFirstCharsUppercase=function(){var a=this.split(" ");var b="";for(var c=0;c<a.length;c++){if(c>0)b+=" ";b+=(new String(a[c])).toFirstCharUppercase()}return b};String.prototype.toFormattedText=function(){var a=this.split(".");var b="";var c=false;for(var d=0;d<a.length;d++){if(d>0){if((new String(a[d])).match(/(\s\w){1,}/)){b+=". "}else{c=true;b+="."}}if(trim(a[d]).indexOf(" ")>0&&!c){b+=trim(a[d]).toFirstCharUppercase()}else b+=trim(a[d]);if((new String(a[d])).indexOf(" ")>-1)c=false}return b};String.prototype.parseAsHTML=function(){var a=document.createElement("div");a.innerHTML="<div>"+this.toString()+"</div>";return a};var nodes=[];String.prototype.toLimitedFormattedHTML=function(a,b){var c=this.toString().toFormattedText().parseAsHTML();var d="";var e="";var f=["div"];var g=false;var h="";for(var i=0;i<c.childNodes.length;i++){var j=collectChildNodes(c.childNodes[i]);for(var k=0;k<j.length;k++){if(k==0)continue;if(j[k].tagName!=null){d+="<"+j[k].tagName;if(j[k].attributes)for(var l=0;l<j[k].attributes.length;l++){d+=" "+j[k].attributes[l].nodeName+"='"+j[k].attributes[l].nodeValue+"' "}d+=">";f.push(j[k].tagName)}else if(j[k].nodeValue&&!j[k].hasChildNodes()){if(e.length+j[k].nodeValue.length<a){e+=j[k].nodeValue;d+=j[k].nodeValue;h=new String(f.pop())}else{g=true}}if(h!=""&&h!="undefined"&&k>1)d+="</"+h+">";h="";if(g)break}}while(t=f.pop())d+="</"+t+">";if(g){if(isUndef(b))var b=" ...";return d+b}return d};String.prototype.toLimitedFormattedText=function(a,b){var c="";if(this.indexOf(" ")<a){var d=this.split(" ");for(var e=0;e<d.length&&c.length+d[e].length<a;e++){if(e>0)c+=" ";c+=d[e]}}else{c=this.slice(0,a)}if(isUndef(b))var b=" ...";var f=a<this.length?b:"";return c.toFormattedText()+f};String.prototype.isEmpty=function(){return this.toString()==""};Object.prototype.addListener=function(a,b){this.addEventListener(a,b,false)}